<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Barcode Print Generator</title>

<script src="https://cdn.jsdelivr.net/npm/jsbarcode@3.11.6/dist/JsBarcode.all.min.js"></script>

<style>
body {
    font-family: system-ui, sans-serif;
    margin: 0;
    padding: 12px;
}

.controls {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    margin-bottom: 12px;
    position: sticky;
    top: 0;
    background: #fff;
    z-index: 10;
}

input, button {
    font-size: 18px;
    padding: 10px;
    width: 100%;
}

button {
    background: #000;
    color: #fff;
    border: none;
    border-radius: 6px;
}

.barcode-container {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
    gap: 10px;
}

.barcode-item {
    border: 1px solid #000;
    padding: 6px;
    text-align: center;
    background: #fff;
}

svg {
    width: 100%;
    height: auto;
}

/* Desktop/tablet */
@media (min-width: 768px) {
    input, button {
        width: auto;
        flex: 1;
    }
}

/* PRINT MODE */
@media print {
    .controls {
        display: none;
    }

    body {
        padding: 0;
    }

    .barcode-container {
        grid-template-columns: repeat(3, 1fr);
        gap: 12px;
    }

    .barcode-item {
        page-break-inside: avoid;
    }
}
</style>
</head>

<body>

<div class="controls">
    <input
        type="text"
        id="barcodeInput"
        placeholder="Scan or type barcode"
        inputmode="numeric"
        oninput="autoGenerate()"
        autofocus
    >

    <input
        type="number"
        id="countInput"
        value="100"
        min="1"
        oninput="autoGenerate()"
    >

    <button onclick="window.print()">Print</button>
</div>

<div class="barcode-container" id="barcodeContainer"></div>

<script>
let debounceTimer;

function autoGenerate() {
    clearTimeout(debounceTimer);

    debounceTimer = setTimeout(() => {
        const value = barcodeInput.value.trim();
        const count = parseInt(countInput.value);
        const container = barcodeContainer;

        container.innerHTML = '';
        if (!value || count <= 0) return;

        for (let i = 0; i < count; i++) {
            const item = document.createElement('div');
            item.className = 'barcode-item';

            const svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
            item.appendChild(svg);
            container.appendChild(item);

            JsBarcode(svg, value, {
                format: "CODE128",
                width: 2,
                height: 50,
                displayValue: true,
                fontSize: 12,
                margin: 4
            });
        }
    }, 120);
}
</script>

</body>
</html>
